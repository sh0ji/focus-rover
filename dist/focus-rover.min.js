var Rover=function(){"use strict";function s(t,e){var i=t||[],n=e;"object"==typeof t&&(t instanceof NodeList?i=Array.from(t):(i=[],n=t)),this.elements=i,this.default=r,this.config=Object.assign({},r,n),this.elements.length&&this.init(!0)}var r={vertical:!0,horizontal:!0,wrap:!0,initialFocusIndex:0,resetOnExit:!1},t=Symbol("backward"),e=Symbol("forward"),i={currentElement:{configurable:!0},backward:{configurable:!0},forward:{configurable:!0},lastIndex:{configurable:!0},validKeys:{configurable:!0}};return s.prototype.init=function(i){var n=this;return this.elements.forEach(function(t,e){n.initTabindex(t,e),i&&n.setListeners(t,e)}),this},s.prototype.initTabindex=function(t,e){return e===this.config.initialFocusIndex?t.getAttribute("href")?t.removeAttribute("tabindex"):t.setAttribute("tabindex",0):t.setAttribute("tabindex",-1),this},s.prototype.setListeners=function(e,i){var n=this,r=this.elements.filter(function(t){return t!==e});return e.addEventListener("keydown",function(t){if(n.validKeys.includes(t.code)){t.preventDefault();var e=n.nextIndex(i,n.forward.includes(t.code));n.elements[e].focus()}}),e.addEventListener("focusin",function(t){t.target!==n.currentElement&&(s.activate(e),r.forEach(function(t){return s.deactivate(t)}))}),e.addEventListener("blur",function(t){var e=t.relatedTarget;n.config.resetOnExit&&!n.elements.includes(e)&&n.init(!1)}),this},s.prototype.nextIndex=function(t,e){return e?t===this.lastIndex?this.config.wrap?0:t:t+1:0===t?this.config.wrap?this.lastIndex:t:t-1},i.currentElement.get=function(){return this.elements.find(function(t){return"-1"!==t.getAttribute("tabindex")})},i.backward.get=function(){return this[t]||(this[t]=[],this.config.vertical&&this[t].push("ArrowUp"),this.config.horizontal&&this[t].push("ArrowLeft")),this[t]},i.forward.get=function(){return this[e]||(this[e]=[],this.config.vertical&&this[e].push("ArrowDown"),this.config.horizontal&&this[e].push("ArrowRight")),this[e]},i.lastIndex.get=function(){return this.elements.length-1},i.validKeys.get=function(){return this.backward.concat(this.forward)||[]},s.activate=function(t){return t.getAttribute("href")?t.removeAttribute("tabindex"):t.setAttribute("tabindex",0),this},s.deactivate=function(t){return t.setAttribute("tabindex",-1),this},Object.defineProperties(s.prototype,i),s}();
